{% extends "main.html" %}
{% block content %}
  <div class="col-md-2">
  	<ul class="nav navmenu-nav well">
       {% block sidebar %}
       {% endblock %}
      </ul>
  </div>
  <div id="content-column" class="col-md-10">
  	<h1 class="page-header"> {% block topic %} {% endblock %}<a href="/ops?p={{ page|add:1 }}" id="nextButton" class="btn btn-primary pull-right"> Next <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> </a></h1>
    <h3 id="title">
      {% block title %}
      {% endblock %}
   </h3> <br />
  </div>

  <!-- code for javascript terminal -->
  <script type="text/javascript">
      $(document).ready(function(){
         var appscaleUp = 'Starting AppScale 2.3.1 over a virtualized cluster. \n' +
                          'Log in to your head node: ssh -i /Users/you/.appscale/appscale.key root@192.168.33.10 \n'+
                          'Head node successfully initialized at 192.168.33.10. It is now starting up cassandra. \n'+
                          'Copying over deployment credentials \n' +
                          'Starting AppController at 192.168.33.10 \n' +
                          'Please wait for the AppController to finish pre-processing tasks. \n';
         var ls = "AppScalefile  guestbook";
         var appscaleDeploy = "This AppScale instance is linked to an e-mail address giving it administrator privileges. \n" +
                              "... \n" +
                              "Done starting up AppScale, now in heartbeat mode \n" +
                              "\n" +
                              "Uploading guestbook... \n" +
                              "We have reserved the name guestbook for your application. \n" +
                              "Creating remote directory to copy app into \n" +
                              "Updating AppController \n" +
                              "Please wait for your app to start up. \n" +
                              " \n" +
                              "Your app can be reached at the following URL: http://192.168.33.10:8080 \n";
         /* Fifth console */
         var console5 = $('<div class="console1">');
         $('#content-column').append(console5);
         var controller5  = console5.console({
          promptLabel: 'AppScale > ',
          commandHandle:function(line){
            if (line == "appscale up") {
              $("#nextButton").toggleClass("btn-primary btn-success");
              $("#title").fadeOut("slow");
              $("#title").hide().html('Appscale is now up and running.').fadeIn("slow");
              return [{msg: appscaleUp,className:"jquery-console-message-value"}];
            }
            else if (line == "ls"){
              $("#title").fadeOut("slow");
              $("#title").hide().html('You can see the example application and the AppScalefile. Try typing appscale deploy guestbook').fadeIn("slow");
              return [{msg: ls,className:"jquery-console-message-value"}];
            }
            else if (line == "appscale deploy guestbook"){
              $("#title").fadeOut("slow");
              $("#title").hide().html('The guestbook application is now deployed').fadeIn("slow");
              return [{msg: appscaleDeploy,className:"jquery-console-message-value"}];
            }
            else {
              var m = "Unrecognized command \'" + line + "\'";
              return [{msg: m,className:"jquery-console-message-value"}];
            }
          },
          colors: ["red","blue","green","black","yellow","white","grey"],
          cols: 40,
          completeHandle:function(prefix){
            var colors = this.colors;
            var ret = [];
            for (var i=0;i<colors.length;i++) {
              var color=colors[i];
              if (color.lastIndexOf(prefix,0) === 0) {
                ret.push(color.substring(prefix.length));
              }
            }
            return ret;
          }
         });
      });
  </script>

  <style type="text/css" media="screen">
      div.console1,div.console2,div.console3 { word-wrap: break-word; }
      /* First console */
      div.console1 { font-size: 14px }
      div.console1 div.jquery-console-inner
       { width:800px; height:360px; background:#333; padding:0.5em;
         overflow:auto }
      div.console1 div.jquery-console-prompt-box
       { color:#fff; font-family:monospace; }
       /*Blinking cursor for terminal*/
      div.console1 div.jquery-console-focus span.jquery-console-cursor
       { background:#fefefe; color:#333; font-weight:bold; opacity: 1;
         -webkit-animation: blink 0.8s infinite;
         -moz-animation: blink 0.8s infinite;
         animation: blink 0.8s infinite; }
      @keyframes blink{
         0% { opacity:1; }
         50% { opacity:0; }
         100% { opacity:1; }
        }
      @-webkit-keyframes blink{
         0% { opacity:1; }
         50% { opacity:0; }
         100% { opacity:1; }
        }
      @-moz-keyframes blink{
         0% { opacity:1; }
         50% { opacity:0; }
         100% { opacity:1; }
        }
      div.console1 div.jquery-console-message-error
       { color:#ef0505; font-family:sans-serif; font-weight:bold;
         padding:0.1em; }
      div.console1 div.jquery-console-message-value
       { color:#1ad027; font-family:monospace;
         padding:0.1em; }
      div.console1 div.jquery-console-message-type
       { color:#52666f; font-family:monospace;
         padding:0.1em; }
      div.console1 span.jquery-console-prompt-label { font-weight:bold }
    </style>
   <!-- end javascript terminal -->
{% endblock %}
